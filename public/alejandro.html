<!DOCTYPE html>
<html>
<head>
	<title>LA NACIONAL</title>
<!--	<script type="text/javascript" src="libraries/p5.dom.js"></script>  -->
<!--	<script type="text/javascript" src="libraries/p5.js"></script>  -->
<!--	<script type="text/javascript" src="libraries/p5.sound.js"></script> -->
	<script type="text/javascript" src="libraries/jquery-3.1.1.js"></script>
	<link rel="stylesheet" type="text/css" href="styles.css">
	<script type="text/javascript" src="script.js"></script>
</head>
<body>
 <div id="containerall">
 	<div id="titulos">
 		<h1 id="titulo">LA NACIONAL DE LICORESa DE COLOMBIA SAS</h1>
 		<h2 id="subtitulo">DISTRIBUCION DE ESTANTERIA</h2>
 		<select id="droplist">
		  <option id="m1" value="1" selected="">Estanteria 1</option>
		  <option id="m2" value="2">Estanteria 2</option>
		  <option id="m3" value="3">Estanteria 3</option>
		  <option id="m3" value="3">Estanteria 4</option>
		</select>
 	</div>

	<div id="slide">
 		<div class="mostradores" id="mostrador1">
 			
 		</div>
 		<div class="mostradores" id="mostrador3">
 			
 		</div>
 	</div>
 	<div id="informacion" style="display: none; width: 30%; height: 40%; position: absolute;text-align: center;">
 		<h1 style="text-align: center; color: #fff">NUEVO/EDITAR PROVEEDOR</h1>
			<input type="hidden" name="estanteria" placeholder="Posicion" id="estanteria"></br></br>
			<input type="text" name="Posicion" placeholder="Posicion" id="Posicion" disabled></br></br>
			<input type="text" name="Empresa" placeholder="Empresa/Proveedor" id="Empresa"></br></br>
			<input type="text" name="Producto" placeholder="Producto" id="Producto"></br></br>
			<input type="text" name="Categoria" placeholder="Categoria" id="Categoria"></br></br>
			<input type="text" name="fechainicial" placeholder="dd/mm/aaaa" id="fechainicial"></br></br>
			<input type="text" name="fechafinal" placeholder="dd/mm/aaaa" id="fechafinal"></br></br>
			<input type="text" name="Mensualidad" placeholder="Mensualidad" id="Mensualidad"></br></br>
			<button id="senddata"> enviar</button>
 	</div>
 </div>
 <div id="proveedores"></div>



 <div id="categories"> </div>


 	
 <script>

 $('#droplist').change(function(event) {
 	estanteria = $(this).val();
			  $('.mostradores').empty();
			  $('#proveedores').empty();
			  $('#categories').empty();
			  $('.mostradores').hide();
		alert(estanteria);
 		$.get( "/showdata",{estanteria:estanteria},function( data ) {
 			partes = data.split('&&');
 			data = JSON.parse(partes[0]);
 			proveedores = JSON.parse(partes[1]);
 			categorias = JSON.parse(partes[2]);
		  $.each(data, function( index, value ) {
			  codigo = "<div class='space' title='"+value[0]+'//'+value[1]+'//'+value[2]+'//'+value[3]+'//'+value[4]+'//'+value[5]+'//'+value[6]+'//'+value[7]+'//'+value[8]+"'>"+value[0]+'<br>'+value[1]+'<br>'+value[2]+'<br>'+value[3]+'<br>'+value[4]+'<br>'+value[7]+"<br></div>";		
			  $('#mostrador'+estanteria).append(codigo);
			  $('#mostrador'+estanteria).show();
			});
		  $.each(proveedores, function( index, value ) {
			  codigo = "<input type='checkbox' class='filtros' value='"+value+"'>"+value+"</br>";		
			  $('#proveedores').append(codigo);
			});
		  $.each(categorias, function( index, value ) {
			  codigo = "<input type='checkbox' class='filtros' value='"+value+"'>"+value+"</br>";		
			  $('#categories').append(codigo);
			});
		});
 });

 	$(document).on('change','.filtros',function() {
			  if ($(this).is(':checked')) {
			  	filtro = $(this).val();
			  	$("[title*='"+filtro+"']").css({
			  			background: 'grey',
			  		});
			  } else {
			  	$("[title*='"+filtro+"']").css({
			  			background: 'white',
			  		});
			  }
			});
	
 	

 	$(document).on('click', '.space' , function() {
 		$('#informacion').css({
 			display: 'block',
 			background: 'rgba(0,0,0,0.7)',
 			left: '35%',
 			top: '30%'
 		});;
 		partes = ($(this).attr('title')).split('//');
 		$('#estanteria').val(partes[6]);
		$('#Posicion').val(partes[0]);
		$('#Empresa').val(partes[1]);
		$('#Producto').val(partes[2]);
		$('#Categoria').val(partes[7]);
		fecha_completa = partes[3].substr(0,10);
		partes_fecha = fecha_completa.split('-');
		fecha = partes_fecha[0]+'-'+partes_fecha[1]+'-'+partes_fecha[2];
		$('#fechainicial').val(fecha);
		fecha_completa = partes[4].substr(0,10);
		partes_fecha = fecha_completa.split('-');
		fecha = partes_fecha[0]+'-'+partes_fecha[1]+'-'+partes_fecha[2];
		$('#fechafinal').val(fecha);
		$('#Mensualidad').val(partes[5]);
	});

 	$('#senddata').click(function(event) {
 		estanteria = $('#estanteria').val();
		Posicion = $('#Posicion').val();
		Categoria = $('#Categoria').val();
		Empresa = $('#Empresa').val();
		Producto = $('#Producto').val();
		Fecha_inicial = $('#fechainicial').val();
		Fecha_final = $('#fechafinal').val();
		Mensualidad = $('#Mensualidad').val();
		$.get( "/updatedata",{estanteria:estanteria,Posicion:Posicion,Categoria:Categoria,Empresa:Empresa,Producto:Producto,Fecha_inicial:Fecha_inicial,Fecha_final:Fecha_final,Mensualidad:Mensualidad},function( data ) {
			alert(data);
			location.reload();
		});
 	});

 </script>
<div class="pop-up"></div>
</body>

</html>